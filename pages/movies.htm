title = "Movies"
url = "/movies/:page?"
layout = "default"
is_hidden = 0

==
<?php
    // PHP Block
    use PaulAllen\Movies\Models\Movie;

    // Required function to process data
    // before page is rendered.
    function onStart() {
        $this['movies'] = Movie::orderBy('year', 'desc')->paginate(10);
    }

?>
==

{# movies is being called from $this['movies'] #}
{% partial 'movie-list' records=movies %}

<div>
    {# https://octobercms.com/docs/services/pagination#displaying-results-in-a-view #}
    {{ movies.render|raw }}
</div>
